\section{Introduction}
\label{sec:introduction}

The cloud is changing how users store and access data. This is true for legacy applications that are migrating on-site data sets to cloud storage to increase their durability and availability~\cite{cloud-storage-adoption}, as well as for emerging applications that are augmenting cloud-hosted data with edge caches to reduce client latency and scale aggregate bandwidth~\cite{Akamai, mirror-image, limelight, WAN-VM-migration}. In both cases, the challenge is to let users leverage a combination of cloud-hosted storage, local on-site storage, and distributed network caches to address storage consistency, durability, availability, scalability, and performance. This paper describes Syndicate, a wide-area storage service that composes existing storage and caching mechanisms to address these challenges in a coherent manner.

The value of network caches and CDNs to read-heavy wide-area workloads is well understood. They are used to reduce read latency, increase read bandwidth (both local and aggregate), and lower the cost of transferring frequently-requested data over expensive links. These gains are great enough today that many enterprises deploy caching proxies for their on-site users, and global content providers leverage CDNs to scale content delivery to their customers~\cite{Akamai, coralcdn, coblitz, limelight, cachefly, mirror-image, cdn-trends}.

The downside of contemporary network caches is that they weaken data consistency by continuing to serve stale data after a write completes. Moreover, each cache/CDN operator has a separate policy on what constitutes ``stale'' data for eviction purposes, which neither readers nor writers control.\footnote{The cost of honoring application-given cache directives is significant enough in practice that at least one popular HTTP cache implementation~\cite{Squid} allows its administrator to selectively ignore them, in violation of the HTTP specification~\cite{HTTP-RFC}, just to avoid the excessive performance loss that honoring them could cost.} This makes them difficult to use in wide-area read/write settings, even when there are many reads, when multiple cooperating origin servers (e.g. users, application processes, etc.) require stronger consistency than what the intermediate caches offer.

To address this problem, we created Syndicate, a storage service that lets users compose local storage, cloud storage, and network caches to build a coherent wide-area storage system. Syndicate is designed to run on top of user-chosen infrastructure and expose user data via a common interface, while offering good performance in read-heavy but read/write wide-area workloads.  It achieves these ends by decoupling consistency from caching and read performance from durability.

The key contribution of Syndicate is a wide-area data consistency protocol that works independently of underlying caching and storage mechanisms. The protocol lets users choose the trade-off between data consistency and read performance, as well as between write durability and write performance. It ensures that writes are observed in the same order by user processes while letting users hit unmodified data in network caches, and it ensures readers observe data consistent with all writes after a user-specified amount of time. It additionally offers a primitive operation to let readers and writers implement cooperative mutual exclusion for application-specific consistency semantics.

To this end, the paper first explores the problem space through a set of use cases and describes a system architecture that meets the requirements of those examples (Section~\ref{sec:motivation} and~\ref{sec:design}), and then outlines and evaluates a specific implemenation that adheres to this design (Section~\ref{sec:implementation} and~\ref{sec:evaluation}). We call attention to these two perspectives---design focus and implementation focus---because they correspond to two different ways to think about Syndicate. On the one hand, Syndicate is designed to be a general-purpose storage system that leverages existing mechanisms. On the other hand, when configured with a POSIX file system interface, Syndicate effectively implements a wide-area file system, with the specific semantics implied by POSIX. Both perspectives are accurate.

